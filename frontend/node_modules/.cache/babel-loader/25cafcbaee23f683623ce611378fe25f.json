{"ast":null,"code":"import _toConsumableArray from\"C:/Users/coegb/Documents/e-commerce/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/Users/coegb/Documents/e-commerce/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useState,useEffect}from'react';import{useAlert}from'react-alert';import{useDispatch,useSelector}from'react-redux';import{updateProduct,getDetailProduct,clearError}from'../../actions/product.actions';import MetaData from'../layout/MetaData';import Sidebar from'./Sidebar';import{productConstansts}from'../../constants/product.Constant';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UpdateProduct=function UpdateProduct(_ref){var match=_ref.match,history=_ref.history;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),price=_useState4[0],setPrice=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),desc=_useState6[0],setDesc=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),category=_useState8[0],setCategory=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),stock=_useState10[0],setStock=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),productimg=_useState12[0],setProductImg=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),oldProductimg=_useState14[0],setOldProductImg=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),imagesPreview=_useState16[0],setImagesPreview=_useState16[1];var alert=useAlert();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.productDetails;}),error=_useSelector.error,product=_useSelector.product;var _useSelector2=useSelector(function(state){return state.product;}),loading=_useSelector2.loading,updateError=_useSelector2.error,isUpdated=_useSelector2.isUpdated;var productId=match.params.id;useEffect(function(){if(product&&product._id!==productId){dispatch(getDetailProduct(productId));}else{setName(product.name);setPrice(product.price);setDesc(product.desc);setCategory(product.category);setStock(product.stock);setOldProductImg(product.productimg);}if(error){alert.error(error);dispatch(clearError());}if(updateError){alert.error(updateError);dispatch(clearError());}if(isUpdated){history.push('/admin/produk');alert.success('produk sudah di ubah');dispatch({type:productConstansts.UPDATE_PRODUCT_RESET});}},[dispatch,alert,error,isUpdated,history,updateError,product,productId]);var submitHandler=function submitHandler(e){e.preventDefault();var formData=new FormData();formData.set('name',name);formData.set('price',price);formData.set('desc',desc);formData.set('category',category);formData.set('stock',stock);productimg.forEach(function(image){formData.set('productimg',image);});dispatch(updateProduct(product._id,formData));};var onChange=function onChange(e){var files=Array.from(e.target.files);setImagesPreview([]);setProductImg([]);setOldProductImg([]);files.forEach(function(file){var reader=new FileReader();reader.onload=function(){if(reader.readyState===2){setImagesPreview(function(oldArray){return[].concat(_toConsumableArray(oldArray),[reader.result]);});setProductImg(function(oldArray){return[].concat(_toConsumableArray(oldArray),[reader.result]);});}};reader.readAsDataURL(file);});};var categories=['Minuman','Makanan','Perlengkapan Rumah Tangga','Kesehatan & Kecantikan','Ibu & Anak'];return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:'Ubah Produk'}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-list-admin\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-dashboard\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"content-product-list-admin\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Ubah Produk\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"create-product\",onSubmit:submitHandler,encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-product-from\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-new-product\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email_field\",children:\"Nama Barang\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-new-product\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email_field\",children:\"Harga\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:price,onChange:function onChange(e){return setPrice(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-new-product\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category_field\",children:\"Category\"}),/*#__PURE__*/_jsx(\"select\",{className:\"form-control\",id:\"category_field\",value:category,onChange:function onChange(e){return setCategory(e.target.value);},children:categories.map(function(category){return/*#__PURE__*/_jsx(\"option\",{value:category,children:category},category);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-new-product\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"stock_field\",children:\"Stock Barang\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",value:stock,onChange:function onChange(e){return setStock(e.target.value);}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-product-desc\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"stock_field\",children:\"Deskripsi Barang\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",value:desc,onChange:function onChange(e){return setDesc(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-product-images\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Gambar Produk\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"custom-file\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"product_images\",className:\"custom-file-input\",id:\"customFile\",onChange:onChange,multiple:true}),/*#__PURE__*/_jsx(\"label\",{className:\"custom-file-label\",htmlFor:\"customFile\",children:\"Choose Images\"})]}),oldProductimg&&oldProductimg.map(function(img){/*#__PURE__*/_jsx(\"img\",{src:img.url,alt:img.url,className:\"mt-3 mr2\",width:\"150\",height:\"150\"},img);}),imagesPreview.map(function(img){return/*#__PURE__*/_jsxs(\"div\",{className:\"image-preview\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Image Preview\"}),/*#__PURE__*/_jsx(\"img\",{src:img,alt:\"Images Preview\",className:\"mt-3 mr-2\",width:\"150\",height:\"150\"},img)]});})]}),/*#__PURE__*/_jsx(\"div\",{className:\"button-new-product\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\"// disabled={loading ? true : false}\n,children:\"Ubah Produk\"})})]})]})]})]});};export default UpdateProduct;","map":{"version":3,"sources":["C:/Users/coegb/Documents/e-commerce/frontend/src/component/admin/UpdateProduct.js"],"names":["React","Fragment","useState","useEffect","useAlert","useDispatch","useSelector","updateProduct","getDetailProduct","clearError","MetaData","Sidebar","productConstansts","UpdateProduct","match","history","name","setName","price","setPrice","desc","setDesc","category","setCategory","stock","setStock","productimg","setProductImg","oldProductimg","setOldProductImg","imagesPreview","setImagesPreview","alert","dispatch","state","productDetails","error","product","loading","updateError","isUpdated","productId","params","id","_id","push","success","type","UPDATE_PRODUCT_RESET","submitHandler","e","preventDefault","formData","FormData","set","forEach","image","onChange","files","Array","from","target","file","reader","FileReader","onload","readyState","oldArray","result","readAsDataURL","categories","value","map","img","url"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect } from 'react'\r\n\r\nimport { useAlert } from 'react-alert'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { updateProduct, getDetailProduct, clearError } from '../../actions/product.actions'\r\nimport MetaData from '../layout/MetaData';\r\nimport Sidebar from './Sidebar'\r\nimport { productConstansts } from '../../constants/product.Constant';\r\n\r\nconst UpdateProduct = ({ match, history }) => {\r\n\r\n    const [name, setName] = useState('')\r\n    const [price, setPrice] = useState(0)\r\n    const [desc, setDesc] = useState('')\r\n    const [category, setCategory] = useState('')\r\n    const [stock, setStock] = useState(0)\r\n    const [productimg, setProductImg] = useState([])\r\n    const [oldProductimg, setOldProductImg] = useState([])\r\n    const [imagesPreview, setImagesPreview] = useState([])\r\n\r\n    const alert = useAlert()\r\n    const dispatch = useDispatch()\r\n\r\n    const { error, product } = useSelector(state => state.productDetails)\r\n    const { loading, error: updateError, isUpdated } = useSelector(state => state.product)\r\n\r\n    const productId = match.params.id\r\n\r\n    useEffect(() => {\r\n        if (product && product._id !== productId) {\r\n            dispatch(getDetailProduct(productId))\r\n        } else {\r\n            setName(product.name)\r\n            setPrice(product.price)\r\n            setDesc(product.desc)\r\n            setCategory(product.category)\r\n            setStock(product.stock)\r\n            setOldProductImg(product.productimg)\r\n        }\r\n        if (error) {\r\n            alert.error(error)\r\n            dispatch(clearError())\r\n        }\r\n        if (updateError) {\r\n            alert.error(updateError)\r\n            dispatch(clearError())\r\n        }\r\n        if (isUpdated) {\r\n            history.push('/admin/produk')\r\n            alert.success('produk sudah di ubah')\r\n            dispatch({ type: productConstansts.UPDATE_PRODUCT_RESET })\r\n        }\r\n    }, [dispatch, alert, error, isUpdated, history, updateError, product, productId])\r\n\r\n    const submitHandler = (e) => {\r\n        e.preventDefault();\r\n        const formData = new FormData();\r\n        formData.set('name', name);\r\n        formData.set('price', price);\r\n        formData.set('desc', desc);\r\n        formData.set('category', category);\r\n        formData.set('stock', stock);\r\n        productimg.forEach(image => {\r\n            formData.set('productimg', image);\r\n        })\r\n        dispatch(updateProduct(product._id, formData))\r\n    }\r\n\r\n    const onChange = e => {\r\n        const files = Array.from(e.target.files)\r\n        setImagesPreview([])\r\n        setProductImg([])\r\n        setOldProductImg([])\r\n        files.forEach(file => {\r\n            const reader = new FileReader();\r\n            reader.onload = () => {\r\n                if (reader.readyState === 2) {\r\n                    setImagesPreview(oldArray => [...oldArray, reader.result])\r\n                    setProductImg(oldArray => [...oldArray, reader.result])\r\n                }\r\n            }\r\n            reader.readAsDataURL(file)\r\n        })\r\n    }\r\n\r\n    const categories = [\r\n        'Minuman',\r\n        'Makanan',\r\n        'Perlengkapan Rumah Tangga',\r\n        'Kesehatan & Kecantikan',\r\n        'Ibu & Anak',\r\n    ]\r\n\r\n    return (\r\n        <Fragment>\r\n            <MetaData title={'Ubah Produk'} />\r\n            <div className=\"product-list-admin\">\r\n                <div className=\"sidebar-dashboard\">\r\n                    <Sidebar />\r\n                </div>\r\n                <div className=\"content-product-list-admin\">\r\n                    <h1>Ubah Produk</h1>\r\n                    <form className=\"create-product\" onSubmit={submitHandler} encType=\"multipart/form-data\">\r\n                        <div className=\"input-product-from\">\r\n                            <div className=\"form-new-product\">\r\n                                <label htmlFor=\"email_field\">Nama Barang</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    className=\"form-control\"\r\n                                    value={name}\r\n                                    onChange={(e) => setName(e.target.value)}\r\n                                />\r\n                            </div>\r\n                            <div className=\"form-new-product\">\r\n                                <label htmlFor=\"email_field\">Harga</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    className=\"form-control\"\r\n                                    value={price}\r\n                                    onChange={(e) => setPrice(e.target.value)}\r\n                                />\r\n                            </div>\r\n                            <div className=\"form-new-product\">\r\n                                <label htmlFor=\"category_field\">Category</label>\r\n                                <select className=\"form-control\" id=\"category_field\" value={category} onChange={(e) => setCategory(e.target.value)}>\r\n                                    {categories.map(category => (\r\n                                        <option key={category} value={category} >{category}</option>\r\n                                    ))}\r\n\r\n                                </select>\r\n                            </div>\r\n                            <div className=\"form-new-product\">\r\n                                <label htmlFor=\"stock_field\">Stock Barang</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    className=\"form-control\"\r\n                                    value={stock}\r\n                                    onChange={(e) => setStock(e.target.value)}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"form-product-desc\">\r\n                            <label htmlFor=\"stock_field\">Deskripsi Barang</label>\r\n                            <textarea\r\n                                className=\"form-control\"\r\n                                value={desc}\r\n                                onChange={(e) => setDesc(e.target.value)}\r\n                            />\r\n                        </div>\r\n                        <div className='form-product-images'>\r\n                            <label>Gambar Produk</label>\r\n                            <div className='custom-file'>\r\n                                <input\r\n                                    type='file'\r\n                                    name='product_images'\r\n                                    className='custom-file-input'\r\n                                    id='customFile'\r\n                                    onChange={onChange}\r\n                                    multiple\r\n                                />\r\n                                <label className='custom-file-label' htmlFor='customFile'>\r\n                                    Choose Images\r\n                                </label>\r\n                            </div>\r\n\r\n                            {\r\n                                oldProductimg && oldProductimg.map(img => {\r\n                                    <img key={img} src={img.url} alt={img.url} className=\"mt-3 mr2\" width=\"150\" height=\"150\" />\r\n                                })\r\n                            }\r\n\r\n                            {imagesPreview.map(img => (\r\n                                <div className=\"image-preview\">\r\n                                    <label>Image Preview</label>\r\n                                    <img src={img} key={img} alt=\"Images Preview\" className=\"mt-3 mr-2\" width=\"150\" height=\"150\" />\r\n                                </div>\r\n                            ))}\r\n\r\n                        </div>\r\n                        <div className=\"button-new-product\">\r\n                            <button\r\n                                type=\"submit\"\r\n                            // disabled={loading ? true : false}\r\n                            >\r\n                                Ubah Produk\r\n                            </button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default UpdateProduct\r\n"]},"metadata":{},"sourceType":"module"}