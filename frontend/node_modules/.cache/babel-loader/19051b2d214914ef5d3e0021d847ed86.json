{"ast":null,"code":"import _slicedToArray from\"C:/Users/coegb/Documents/e-commerce/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useState,useEffect}from'react';import{Link}from'react-router-dom';import Loader from'../layout/Loader';import{useAlert}from'react-alert';import{useDispatch,useSelector}from'react-redux';import{getOrderDetails,updateOrder,clearErrors}from'../../actions/orderAction';import{orderConstant}from'../../constants/orderConstant';import MetaData from'../layout/MetaData';import Sidebar from'./Sidebar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProcessOrder=function ProcessOrder(_ref){var match=_ref.match;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),status=_useState2[0],setStatus=_useState2[1];var alert=useAlert();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.orderDetails;}),loading=_useSelector.loading,_useSelector$order=_useSelector.order,order=_useSelector$order===void 0?{}:_useSelector$order;var shippingInfo=order.shippingInfo,orderItems=order.orderItems,paymentInfo=order.paymentInfo,user=order.user,totalPrice=order.totalPrice,orderStatus=order.orderStatus;var _useSelector2=useSelector(function(state){return state.order;}),error=_useSelector2.error,isUpdated=_useSelector2.isUpdated;var orderId=match.params.id;useEffect(function(){dispatch(getOrderDetails(orderId));if(error){alert.error(error);dispatch(clearErrors());}if(isUpdated){alert.success('order sudah di ubah');dispatch({type:orderConstant.UPDATE_ORDER_RESET});}},[dispatch,alert,error,isUpdated,orderId]);var updateOrderHandler=function updateOrderHandler(id){var formData=new FormData();formData.set('status',status);dispatch(updateOrder(id,formData));};var shippingDetails=shippingInfo&&\"\".concat(shippingInfo.address,\", \").concat(shippingInfo.city,\", \").concat(shippingInfo.postialCode);var isPaid=paymentInfo&&paymentInfo.status==='succeeded'?true:false;return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:\"Proses Order # \".concat(order&&order._id)}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-list-admin\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-dashboard\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"x\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Pesanan #\",order&&order._id]}),loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsxs(\"div\",{className:\"order-admin\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pengiriman\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Pengiriman\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Dikirim ke \",user&&user.name]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Telp: \",shippingInfo&&shippingInfo.phoneNo]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:shippingDetails})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Rp. \",totalPrice]})})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h4\",{className:\"my-4\",children:\"Payment\"}),/*#__PURE__*/_jsx(\"p\",{className:isPaid?\"greenColor\":\"redColor\",children:/*#__PURE__*/_jsx(\"b\",{children:isPaid?\"PAID\":\"NOT PAID\"})}),/*#__PURE__*/_jsx(\"h4\",{className:\"my-4\",children:\"Stripe ID\"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"b\",{children:paymentInfo&&paymentInfo.id})}),/*#__PURE__*/_jsx(\"h4\",{className:\"my-4\",children:\"Order Status:\"}),/*#__PURE__*/_jsx(\"p\",{className:order.orderStatus&&String(order.orderStatus).includes('Delivered')?\"greencolor\":\"redcolor\",children:/*#__PURE__*/_jsx(\"b\",{children:orderStatus})}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"order-product\",children:orderItems&&orderItems.map(function(item){return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-product\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Link,{to:\"/Produk/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Rp.\",item.price]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[\" \",item.quantity,\" Barang\"]})})]},item.product)});})}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-update\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-control\",name:\"status\",value:status,onChange:function onChange(e){return setStatus(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"Processing\",children:\"Processing\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Shipped\",children:\"Perjalanan\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Delivered\",children:\"Sampai Tujuan\"})]})})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"button-update-order\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return updateOrderHandler(order._id);}// disabled={loading ? true : false}\n,children:\"Ubah Pesanan\"})})]})]})]})]});};export default ProcessOrder;","map":{"version":3,"sources":["C:/Users/coegb/Documents/e-commerce/frontend/src/component/admin/ProcessOrder.js"],"names":["React","Fragment","useState","useEffect","Link","Loader","useAlert","useDispatch","useSelector","getOrderDetails","updateOrder","clearErrors","orderConstant","MetaData","Sidebar","ProcessOrder","match","status","setStatus","alert","dispatch","state","orderDetails","loading","order","shippingInfo","orderItems","paymentInfo","user","totalPrice","orderStatus","error","isUpdated","orderId","params","id","success","type","UPDATE_ORDER_RESET","updateOrderHandler","formData","FormData","set","shippingDetails","address","city","postialCode","isPaid","_id","name","phoneNo","String","includes","map","item","image","product","price","quantity","e","target","value"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect } from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport Loader from '../layout/Loader'\r\nimport { useAlert } from 'react-alert'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getOrderDetails, updateOrder, clearErrors } from '../../actions/orderAction'\r\nimport { orderConstant } from '../../constants/orderConstant'\r\nimport MetaData from '../layout/MetaData';\r\nimport Sidebar from './Sidebar'\r\n\r\nconst ProcessOrder = ({ match }) => {\r\n\r\n    const [status, setStatus] = useState('')\r\n\r\n    const alert = useAlert()\r\n    const dispatch = useDispatch()\r\n\r\n    const { loading, order = {} } = useSelector(state => state.orderDetails)\r\n    const { shippingInfo, orderItems, paymentInfo, user, totalPrice, orderStatus } = order\r\n    const { error, isUpdated } = useSelector(state => state.order)\r\n\r\n    const orderId = match.params.id\r\n\r\n    useEffect(() => {\r\n\r\n        dispatch(getOrderDetails(orderId))\r\n\r\n        if (error) {\r\n            alert.error(error)\r\n            dispatch(clearErrors())\r\n        }\r\n        if (isUpdated) {\r\n            alert.success('order sudah di ubah')\r\n            dispatch({ type: orderConstant.UPDATE_ORDER_RESET })\r\n        }\r\n    }, [dispatch, alert, error, isUpdated, orderId])\r\n\r\n    const updateOrderHandler = (id) => {\r\n        const formData = new FormData();\r\n        formData.set('status', status);\r\n\r\n        dispatch(updateOrder(id, formData))\r\n    }\r\n\r\n    const shippingDetails = shippingInfo && `${shippingInfo.address}, ${shippingInfo.city}, ${shippingInfo.postialCode}`\r\n    const isPaid = paymentInfo && paymentInfo.status === 'succeeded' ? true : false;\r\n\r\n    return (\r\n        <Fragment>\r\n            <MetaData title={`Proses Order # ${order && order._id}`} />\r\n            <div className=\"product-list-admin\">\r\n                <div className=\"sidebar-dashboard\">\r\n                    <Sidebar />\r\n                </div>\r\n                <div className=\"x\">\r\n                    <h1>Pesanan #{order && order._id}</h1>\r\n                    {\r\n                        loading ? <Loader /> :\r\n                            <div className=\"order-admin\">\r\n                                <div className=\"pengiriman\" >\r\n                                    <h5>Pengiriman</h5>\r\n                                    <div>\r\n                                        <p>Dikirim ke {user && user.name}</p>\r\n                                    </div>\r\n                                    <div>\r\n                                        <p>Telp: {shippingInfo && shippingInfo.phoneNo}</p>\r\n                                    </div>\r\n                                    <div>\r\n                                        <p>{shippingDetails}</p>\r\n                                    </div>\r\n                                    <div>\r\n                                        <p>Rp. {totalPrice}</p>\r\n                                    </div>\r\n                                </div>\r\n                                <hr />\r\n                                <h4 className=\"my-4\">Payment</h4>\r\n                                <p className={isPaid ? \"greenColor\" : \"redColor\"} ><b>{isPaid ? \"PAID\" : \"NOT PAID\"}</b></p>\r\n                                <h4 className=\"my-4\">Stripe ID</h4>\r\n                                <p><b>{paymentInfo && paymentInfo.id}</b></p>\r\n                                <h4 className=\"my-4\">Order Status:</h4>\r\n                                <p className={order.orderStatus && String(order.orderStatus).includes('Delivered') ? \"greencolor\" : \"redcolor\"} ><b>{orderStatus}</b></p>\r\n                                <hr />\r\n                                <div className=\"order-product\">\r\n                                    {\r\n                                        orderItems && orderItems.map(item => (\r\n                                            <Fragment>\r\n                                                <div className=\"card-product\" key={item.product}>\r\n                                                    <div>\r\n                                                        <img src={item.image} alt={item.name} />\r\n                                                    </div>\r\n                                                    <div>\r\n                                                        <Link to={`/Produk/${item.product}`}>{item.name}</Link>\r\n                                                    </div>\r\n                                                    <div>\r\n                                                        <p>Rp.{item.price}</p>\r\n                                                    </div>\r\n                                                    <div>\r\n                                                        <p> {item.quantity} Barang</p>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </Fragment>\r\n                                        ))\r\n                                    }\r\n                                </div>\r\n                                <hr />\r\n                                <div className=\"status-update\">\r\n                                    <h4>Status</h4>\r\n                                    <div className=\"form-group\">\r\n                                        <select\r\n                                            className=\"form-control\"\r\n                                            name=\"status\"\r\n                                            value={status}\r\n                                            onChange={(e) => setStatus(e.target.value)}\r\n                                        >\r\n                                            <option value=\"Processing\">Processing</option>\r\n                                            <option value=\"Shipped\">Perjalanan</option>\r\n                                            <option value=\"Delivered\">Sampai Tujuan</option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                                <hr />\r\n                                <div className=\"button-update-order\">\r\n                                    <button\r\n                                        onClick={() => updateOrderHandler(order._id)}\r\n                                    // disabled={loading ? true : false}\r\n                                    >\r\n                                        Ubah Pesanan\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default ProcessOrder\r\n"]},"metadata":{},"sourceType":"module"}